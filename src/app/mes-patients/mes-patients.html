

<div class="container mt-4">
  <h3 class="mb-3">Mes Patients</h3>

  <div *ngIf="message" class="alert alert-warning">{{ message }}</div>

  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th style="width:5%">ID</th>
          <th style="width:45%">Nom & Photo</th>
          <th class="text-center" style="width:25%">Statut Prélèvement</th>
          <th class="text-center" style="width:25%">Statut Consultation</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of patients; let i = index; trackBy: trackByPatient">
          <th scope="row">{{ p.id }}</th>

          <!-- Nom + Photo -->
          <td>
            <div class="d-flex align-items-center">
              <!-- si tu as un champ photoUrl, il est utilisé sinon patient.png -->
              <img [src]="p.photoUrl || 'patient.png'"
                   alt="{{ p.nom }} {{ p.prenom }}"
                   class="rounded-circle me-3" width="48" height="48">
              <div>
                <div class="fw-bold">{{ p.nom }} {{ p.prenom }}</div>
                <div class="small text-muted">{{ p.email || '' }}</div>
              </div>
            </div>
          </td>

          <!-- Statut prélèvement (affiche la valeur brute, uniquement style) -->
          <td class="text-center">
            <span class="badge rounded-pill"
                  [ngClass]="{
                    'bg-success': p.statutPrelevement === 'EFFECTUER',
                    'bg-warning text-dark': p.statutPrelevement === 'EN_COURS',
                    'bg-danger': p.statutPrelevement === 'NON_EFFECTUE',
                    'bg-secondary': !(p.statutPrelevement)
                  }">
              {{ p.statutPrelevement }}
            </span>
          </td>

          <!-- Statut consultation (affiche la valeur brute, uniquement style) -->
          <td class="text-center">
            <span class="badge rounded-pill"
                  [ngClass]="{
                    'bg-success': p.statutConsultation === 'CONSULTER',
                    'bg-warning text-dark': p.statutConsultation === 'EN_COURS',
                    'bg-secondary': p.statutConsultation === 'NON_CONSULTE' || !(p.statutConsultation)
                  }">
              {{ p.statutConsultation }}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
